<html>
    <head>
        <!-- Load plotly.js into the DOM -->
        <script src='https://cdn.plot.ly/plotly-2.31.1.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
        <style>
            #myDiv {
                width: 100%;
                height: 90%;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .container{
                margin-left: 25vw;
                margin-right: 25vw;
                display: flex;
                justify-content: center;
                align-items: center;
            }
        </style>
    </head>
    <body>
        <div id='myDiv'></div>
        <div class="container">
            <input type="text" placeholder="fonction en version js" id="fonction">
            <input type="number" placeholder="max x" id="maxX">
            <input type="number" placeholder="min x" id="minX">
            <input type="number" placeholder="max y" id="maxY">
            <input type="number" placeholder="min y" id="minY">
            <input type="button" value="Graph" onclick="graph()">
        </div>
    </body>
    <script>
        function graph(){
            let maxX = document.getElementById('maxX').value;
            let minX = document.getElementById('minX').value;
            let maxY = document.getElementById('maxY').value;
            let minY = document.getElementById('minY').value;
            let fonction = document.getElementById('fonction').value;

            if (maxX === null || minX === null || maxY === null || minY === null || fonction === null) {
                console.error('Une ou plusieurs valeurs sont null');
                return;
            }

            var x = numeric.linspace(eval(minX), eval(maxX), 10);
            var y = numeric.linspace(eval(minY), eval(maxY), 10);
            var z = new Array(x.length);
            for (var i = 0; i < x.length; i++) {
                z[i] = new Array(y.length);
                for (var j = 0; j < y.length; j++) {
                    z[i][j] = eval(fonction);
                }
            }
        
            var data = [{
                z: z,
                x: x,
                y: y,
                type: 'surface'
            }];

            var max = Math.max(...z.flat());
            var min = Math.min(...z.flat()).toFixed(2);
        
            var layout = {
                title: 'Max: '+max+' Min: '+min,
                autosize: false,
                width: 500,
                height: 500,
                margin: {
                    l: 65,
                    r: 50,
                    b: 65,
                    t: 90,
                }
            };
        
            Plotly.newPlot('myDiv', data, layout);
        }
    </script>
</html>